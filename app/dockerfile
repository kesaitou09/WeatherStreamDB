# # app/Dockerfile
# FROM python:3.12-slim

# # 作業ディレクトリ
# WORKDIR /app

# # 依存パッケージのインストール
# COPY requirements.txt .
# RUN pip install --no-cache-dir -r requirements.txt

# # （開発中は docker-compose の volume マウントで上書きされるので
# #  COPY . . はなくてもOKだけど、一応書いておくと本番にも使いやすい）
# COPY . .

# # デフォルトの起動コマンド（composeで上書きも可能）
# CMD ["python", "main.py"]


# app/Dockerfile
FROM python:3.12-slim

ENV DEBIAN_FRONTEND=noninteractive

# eccodes 本体 + 開発ヘッダをインストール
RUN apt-get update && \
    apt-get install -y --no-install-recommends \
      eccodes \
      libeccodes0 \
      libeccodes-dev \
      ca-certificates && \
    rm -rf /var/lib/apt/lists/*

WORKDIR /app

# Python ライブラリをインストール
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# アプリケーションコード
COPY . .

# デフォルトの起動：今回は GRIB 取り込み
CMD ["python", "ingest_grib.py"]
